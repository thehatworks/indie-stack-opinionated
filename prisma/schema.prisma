datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

generator zod {
  provider = "zod-prisma"
  output   = "../app/zod"
  // relationModel         = "default" // Do not export non-relational model.
  // useDecimalJs             = true // represent the prisma Decimal type using Decimal.js (as Prisma does)

  // https://www.prisma.io/docs/concepts/components/prisma-client/working-with-fields/working-with-json-fields#filtering-by-null-values
}

model User {
  /// The user's id
  /// @default generated by prisma and cuid()
  id    String @id @default(cuid())
  /// User's email address (unique key)
  /// @zod.min(1, "Please Enter an Email Address").email("Please Use a Valid Email Address")
  email String @unique

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  /// User's password as a foriegn key (traditional)
  password Password?
  /// User's associated notes from model Note
  notes    Note[]
}

model Password {
  /// bccrypt hash of password
  hash String

  /// Associated User entry
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  /// id of associated user entry (foreign key)
  userId String @unique
}

model Note {
  /// Unique note id
  /// @default generated by prisma and cuid()
  id    String @id @default(cuid())
  /// The note's title
  title String
  /// The note's body text
  body  String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  /// Associated User
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  /// id of associated User (foreign key)
  userId String
}
